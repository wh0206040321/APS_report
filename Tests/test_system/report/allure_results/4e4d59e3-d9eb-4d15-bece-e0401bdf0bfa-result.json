{"name": "test_unit_download", "status": "failed", "statusDetails": {"message": "Failed: 下载文件未生成", "trace": "self = <test_system.test_planUnit.TestPlanUnitPage object at 0x000001CD675E7E20>\nlogin_to_planUnit = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"3a3fd5342f9a36728bcff7d696dccaec\")>\n\n    @allure.story(\"下载成功\")\n    # @pytest.mark.run(order=1)\n    def test_unit_download(self, login_to_planUnit):\n        driver = login_to_planUnit  # WebDriver 实例\n        unit = PlanUnitPage(driver)  # 用 driver 初始化 PlanUnitPage\n        name = \"1测试A\"\n        # 1. 清理下载目录，确保环境干净\n        download_path = os.path.abspath(\"downloads\")\n        print(f\"[DEBUG] 下载路径: {download_path}\")\n        for f in os.listdir(download_path):\n            os.remove(os.path.join(download_path, f))\n    \n        # 2. 执行下载操作\n        unit.select_input(name)\n        unit.click_button(f'//table[@class=\"vxe-table--body\"]//tr/td[2]//span[text()=\"{name}\"]')\n        unit.click_all_button(\"下载\")\n    \n        # 3. 等待文件下载完成（轮询判断）\n        expected_file = os.path.join(download_path, f\"{name}.km\")  # 根据实际文件名修改\n        timeout = 10\n        for i in range(timeout):\n            if os.path.exists(expected_file):\n                break\n            sleep(1)\n        else:\n>           pytest.fail(\"下载文件未生成\")\nE           Failed: 下载文件未生成\n\ntest_planUnit.py:722: Failed"}, "attachments": [{"name": "test_unit_download_failure", "source": "243e06a8-b424-4516-ab60-242d9bba23e8-attachment.png", "type": "image/png"}, {"name": "test_unit_download_source", "source": "24ef2713-4d8f-4eb2-a36f-7ca776005f95-attachment.html", "type": "text/html"}, {"name": "log", "source": "653d5816-9b9c-4644-ac61-d78717a690a9-attachment.txt", "type": "text/plain"}], "start": 1756810790817, "stop": 1756810802516, "uuid": "b6515735-f98b-4e68-b3c9-2f6ef096f9b1", "historyId": "193059d416d23c7f644d0cb59d7d3e64", "testCaseId": "193059d416d23c7f644d0cb59d7d3e64", "fullName": "Tests.test_system.test_planUnit.TestPlanUnitPage#test_unit_download", "labels": [{"name": "story", "value": "下载成功"}, {"name": "feature", "value": "计划单元页用例"}, {"name": "tag", "value": "run(order=204)"}, {"name": "parentSuite", "value": "Tests.test_system"}, {"name": "suite", "value": "test_planUnit"}, {"name": "subSuite", "value": "TestPlanUnitPage"}, {"name": "host", "value": "WIN-20240820MJV"}, {"name": "thread", "value": "27948-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Tests.test_system.test_planUnit"}]}