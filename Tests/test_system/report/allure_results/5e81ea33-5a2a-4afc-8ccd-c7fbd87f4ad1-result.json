{"name": "test_unit_download", "status": "failed", "statusDetails": {"message": "Failed: 下载文件未生成", "trace": "self = <test_system.test_planUnit.TestPlanUnitPage object at 0x000001DAE1903E50>\nlogin_to_planUnit = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"41614a9aeda39db45bd71bcb74e9e830\")>\n\n    @allure.story(\"下载成功\")\n    # @pytest.mark.run(order=1)\n    def test_unit_download(self, login_to_planUnit):\n        driver = login_to_planUnit  # WebDriver 实例\n        unit = PlanUnitPage(driver)  # 用 driver 初始化 PlanUnitPage\n        name = \"1测试A\"\n        # 1. 清理下载目录，确保环境干净\n        download_path = os.path.abspath(\"downloads\")\n        print(f\"[DEBUG] 下载路径: {download_path}\")\n        for f in os.listdir(download_path):\n            os.remove(os.path.join(download_path, f))\n    \n        # 2. 执行下载操作\n        unit.select_input(name)\n        unit.click_button(f'//table[@class=\"vxe-table--body\"]//tr/td[2]//span[text()=\"{name}\"]')\n        unit.click_all_button(\"下载\")\n    \n        # 3. 等待文件下载完成（轮询判断）\n        expected_file = os.path.join(download_path, f\"{name}.km\")  # 根据实际文件名修改\n        timeout = 10\n        for i in range(timeout):\n            if os.path.exists(expected_file):\n                break\n            sleep(1)\n        else:\n>           pytest.fail(\"下载文件未生成\")\nE           Failed: 下载文件未生成\n\ntest_planUnit.py:722: Failed"}, "attachments": [{"name": "test_unit_download_failure", "source": "182f49fe-15d2-4882-b82d-acc7473233e5-attachment.png", "type": "image/png"}, {"name": "test_unit_download_source", "source": "14868f51-97a6-4f26-b3f9-f8405b6c49c2-attachment.html", "type": "text/html"}, {"name": "log", "source": "5085526c-3a99-43fb-a0e7-303c111fb21e-attachment.txt", "type": "text/plain"}], "start": 1756810664451, "stop": 1756810676087, "uuid": "e2c0c043-9983-428c-9af2-6a37daa0887d", "historyId": "193059d416d23c7f644d0cb59d7d3e64", "testCaseId": "193059d416d23c7f644d0cb59d7d3e64", "fullName": "Tests.test_system.test_planUnit.TestPlanUnitPage#test_unit_download", "labels": [{"name": "story", "value": "下载成功"}, {"name": "feature", "value": "计划单元页用例"}, {"name": "tag", "value": "run(order=204)"}, {"name": "parentSuite", "value": "Tests.test_system"}, {"name": "suite", "value": "test_planUnit"}, {"name": "subSuite", "value": "TestPlanUnitPage"}, {"name": "host", "value": "WIN-20240820MJV"}, {"name": "thread", "value": "28528-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Tests.test_system.test_planUnit"}]}