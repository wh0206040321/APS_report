{"uid":"7a85e7a399bb5862","name":"test_role_success1","fullName":"Tests.test_system.test_role.TestRolePage#test_role_success1","historyId":"01546aee86968e47d2ea990fcc6c86e6","time":{"start":1769111256368,"stop":1769111373267,"duration":116899},"status":"failed","statusMessage":"AssertionError: assert ('\\u4fdd\\u5b58\\u6210\\u529f' == '\\u4fdd\\u5b58\\u6210\\u529f'\n  \n  \u001B[0m\u001B[90m \u001B[39;49;00m 保存成功\u001B[90m\u001B[39;49;00m and 9 >= 7 and '金属（演示）' == '1测试A'\n  \n  \u001B[0m\u001B[91m- 1测试A\u001B[39;49;00m\u001B[90m\u001B[39;49;00m\n  \u001B[92m+ 金属（演示）\u001B[39;49;00m\u001B[90m\u001B[39;49;00m)","statusTrace":"self = <test_system.test_role.TestRolePage object at 0x00000218C6EEACE0>, login_to_role = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"2b2348ef88e7a3f86ec6cb88114d0296\")>\n\n    @allure.story(\"添加角色成功，勾选所有菜单,并且增加该用户权限，可切换新建单元\")\n    # @pytest.mark.run(order=1)\n    def test_role_success1(self, login_to_role):\n        driver = login_to_role  # WebDriver 实例\n        role = RolePage(driver)  # 用 driver 初始化 RolePage\n        page = LoginPage(driver)\n        date_driver = DateDriver()\n        role.wait_for_el_loading_mask()\n        name = \"1测试角色代码1\"\n        module = \"1测试A\"\n        role.add_role(name, module)\n        num = len(role.finds_elements(By.XPATH, '//div[@class=\"ivu-tree\"]//li/label/span'))\n        for i in range(1, num+1):\n            sleep(0.1)\n            role.click_button(f'(//div[@class=\"ivu-tree\"]//li/label/span)[{i}]')\n        role.click_all_button(\"保存\")\n        role.get_find_message()\n        role.right_refresh()\n        role.select_input(name)\n        sleep(2)\n        ele = role.finds_elements(By.XPATH, f'//table[@class=\"vxe-table--body\"]//tr/td[2]//span[text()=\"{name}\"]')\n    \n        assert len(ele) == 1\n    \n        role.click_button('(//span[text()=\"用户权限管理\"])[1]')\n        role.wait_for_loading_to_disappear()\n        role.enter_texts('//div[div[p[text()=\"用户代码\"]]]//input', date_driver.username)\n        sleep(3)\n        role.click_button(f'(//table[@class=\"vxe-table--body\"]//span[text()=\"{date_driver.username}\"])[1]')\n        sleep(2)\n        role.click_all_button(\"编辑\")\n        sleep(2)\n    \n        role.select_input(name)\n        sleep(3)\n        role.click_button('(//table[@class=\"vxe-table--body\"]//tr[1]/td[2]/div/span)[2]')\n        sleep(2)\n        role.click_all_button(\"保存\")\n        message = role.get_find_message()\n        role.right_refresh('用户权限管理')\n        driver.refresh()\n        role.wait_for_loading_to_disappear()\n        role.enter_texts('//div[div[p[text()=\"用户代码\"]]]//input', date_driver.username)\n        sleep(2)\n        role.click_button(f'(//table[@class=\"vxe-table--body\"]//span[text()=\"{date_driver.username}\"])[1]')\n        sleep(2)\n        role.select_input(name)\n        sleep(3)\n        sty = role.get_find_element_xpath('(//table[@class=\"vxe-table--body\"]//tr[1]/td[2]/div/span)[2]').get_attribute('class')\n        if 'is--checked' not in sty:\n            role.click_button(f'(//table[@class=\"vxe-table--body\"]//span[text()=\"{date_driver.username}\"])[1]')\n            role.click_all_button(\"编辑\")\n            sleep(2)\n    \n            role.select_input(name)\n            sleep(3)\n            role.click_button('(//table[@class=\"vxe-table--body\"]//tr[1]/td[2]/div/span)[2]')\n            role.click_all_button(\"保存\")\n            role.get_find_message()\n    \n        driver.refresh()\n        role.wait_for_loading_to_disappear()\n        role.enter_texts('//div[div[p[text()=\"用户代码\"]]]//input', date_driver.username)\n        role.select_input(name)\n        sleep(1)\n        role.click_button(f'(//table[@class=\"vxe-table--body\"]//span[text()=\"{date_driver.username}\"])[1]')\n        role.click_button(f'//div[contains(text(),\"{date_driver.planning}\")]')\n    \n        role.click_button(f'//ul/li[text()=\"{module}\"]')\n        role.wait_for_loadingbox()\n        num_ = len(role.finds_elements(By.XPATH, f'//div[@class=\"listDivCon\"]/div'))\n        swich_name = role.get_find_element_xpath(f'//div[@class=\"ivu-dropdown-rel\"]/div').text\n        role.click_button(f'//div[contains(text(),\"{module}\")]')\n        role.click_button(f'//ul/li[text()=\"{date_driver.planning}\"]')\n        role.wait_for_loadingbox()\n        list_ = [\"系统管理\", \"系统设置\", \"角色管理\"]\n        for v in list_:\n            page.click_button(f'(//span[text()=\"{v}\"])[1]')\n        role.wait_for_el_loading_mask()\n>       assert message == \"保存成功\" and num_ >= 7 and swich_name == module\nE       AssertionError: assert ('\\u4fdd\\u5b58\\u6210\\u529f' == '\\u4fdd\\u5b58\\u6210\\u529f'\nE         \nE         \u001B[0m\u001B[90m \u001B[39;49;00m 保存成功\u001B[90m\u001B[39;49;00m and 9 >= 7 and '金属（演示）' == '1测试A'\nE         \nE         \u001B[0m\u001B[91m- 1测试A\u001B[39;49;00m\u001B[90m\u001B[39;49;00m\nE         \u001B[92m+ 金属（演示）\u001B[39;49;00m\u001B[90m\u001B[39;49;00m)\n\nTests\\test_system\\test_role.py:227: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"login_to_role","time":{"start":1769111217190,"stop":1769111229740,"duration":12550},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert ('\\u4fdd\\u5b58\\u6210\\u529f' == '\\u4fdd\\u5b58\\u6210\\u529f'\n  \n  \u001B[0m\u001B[90m \u001B[39;49;00m 保存成功\u001B[90m\u001B[39;49;00m and 9 >= 7 and '金属（演示）' == '1测试A'\n  \n  \u001B[0m\u001B[91m- 1测试A\u001B[39;49;00m\u001B[90m\u001B[39;49;00m\n  \u001B[92m+ 金属（演示）\u001B[39;49;00m\u001B[90m\u001B[39;49;00m)","statusTrace":"self = <test_system.test_role.TestRolePage object at 0x00000218C6EEACE0>, login_to_role = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"2b2348ef88e7a3f86ec6cb88114d0296\")>\n\n    @allure.story(\"添加角色成功，勾选所有菜单,并且增加该用户权限，可切换新建单元\")\n    # @pytest.mark.run(order=1)\n    def test_role_success1(self, login_to_role):\n        driver = login_to_role  # WebDriver 实例\n        role = RolePage(driver)  # 用 driver 初始化 RolePage\n        page = LoginPage(driver)\n        date_driver = DateDriver()\n        role.wait_for_el_loading_mask()\n        name = \"1测试角色代码1\"\n        module = \"1测试A\"\n        role.add_role(name, module)\n        num = len(role.finds_elements(By.XPATH, '//div[@class=\"ivu-tree\"]//li/label/span'))\n        for i in range(1, num+1):\n            sleep(0.1)\n            role.click_button(f'(//div[@class=\"ivu-tree\"]//li/label/span)[{i}]')\n        role.click_all_button(\"保存\")\n        role.get_find_message()\n        role.right_refresh()\n        role.select_input(name)\n        sleep(2)\n        ele = role.finds_elements(By.XPATH, f'//table[@class=\"vxe-table--body\"]//tr/td[2]//span[text()=\"{name}\"]')\n    \n        assert len(ele) == 1\n    \n        role.click_button('(//span[text()=\"用户权限管理\"])[1]')\n        role.wait_for_loading_to_disappear()\n        role.enter_texts('//div[div[p[text()=\"用户代码\"]]]//input', date_driver.username)\n        sleep(3)\n        role.click_button(f'(//table[@class=\"vxe-table--body\"]//span[text()=\"{date_driver.username}\"])[1]')\n        sleep(2)\n        role.click_all_button(\"编辑\")\n        sleep(2)\n    \n        role.select_input(name)\n        sleep(3)\n        role.click_button('(//table[@class=\"vxe-table--body\"]//tr[1]/td[2]/div/span)[2]')\n        sleep(2)\n        role.click_all_button(\"保存\")\n        message = role.get_find_message()\n        role.right_refresh('用户权限管理')\n        driver.refresh()\n        role.wait_for_loading_to_disappear()\n        role.enter_texts('//div[div[p[text()=\"用户代码\"]]]//input', date_driver.username)\n        sleep(2)\n        role.click_button(f'(//table[@class=\"vxe-table--body\"]//span[text()=\"{date_driver.username}\"])[1]')\n        sleep(2)\n        role.select_input(name)\n        sleep(3)\n        sty = role.get_find_element_xpath('(//table[@class=\"vxe-table--body\"]//tr[1]/td[2]/div/span)[2]').get_attribute('class')\n        if 'is--checked' not in sty:\n            role.click_button(f'(//table[@class=\"vxe-table--body\"]//span[text()=\"{date_driver.username}\"])[1]')\n            role.click_all_button(\"编辑\")\n            sleep(2)\n    \n            role.select_input(name)\n            sleep(3)\n            role.click_button('(//table[@class=\"vxe-table--body\"]//tr[1]/td[2]/div/span)[2]')\n            role.click_all_button(\"保存\")\n            role.get_find_message()\n    \n        driver.refresh()\n        role.wait_for_loading_to_disappear()\n        role.enter_texts('//div[div[p[text()=\"用户代码\"]]]//input', date_driver.username)\n        role.select_input(name)\n        sleep(1)\n        role.click_button(f'(//table[@class=\"vxe-table--body\"]//span[text()=\"{date_driver.username}\"])[1]')\n        role.click_button(f'//div[contains(text(),\"{date_driver.planning}\")]')\n    \n        role.click_button(f'//ul/li[text()=\"{module}\"]')\n        role.wait_for_loadingbox()\n        num_ = len(role.finds_elements(By.XPATH, f'//div[@class=\"listDivCon\"]/div'))\n        swich_name = role.get_find_element_xpath(f'//div[@class=\"ivu-dropdown-rel\"]/div').text\n        role.click_button(f'//div[contains(text(),\"{module}\")]')\n        role.click_button(f'//ul/li[text()=\"{date_driver.planning}\"]')\n        role.wait_for_loadingbox()\n        list_ = [\"系统管理\", \"系统设置\", \"角色管理\"]\n        for v in list_:\n            page.click_button(f'(//span[text()=\"{v}\"])[1]')\n        role.wait_for_el_loading_mask()\n>       assert message == \"保存成功\" and num_ >= 7 and swich_name == module\nE       AssertionError: assert ('\\u4fdd\\u5b58\\u6210\\u529f' == '\\u4fdd\\u5b58\\u6210\\u529f'\nE         \nE         \u001B[0m\u001B[90m \u001B[39;49;00m 保存成功\u001B[90m\u001B[39;49;00m and 9 >= 7 and '金属（演示）' == '1测试A'\nE         \nE         \u001B[0m\u001B[91m- 1测试A\u001B[39;49;00m\u001B[90m\u001B[39;49;00m\nE         \u001B[92m+ 金属（演示）\u001B[39;49;00m\u001B[90m\u001B[39;49;00m)\n\nTests\\test_system\\test_role.py:227: AssertionError","steps":[],"attachments":[{"uid":"e4a5ea2175c11eda","name":"test_role_success1_20260123_034933","source":"e4a5ea2175c11eda.png","type":"image/png","size":106121},{"uid":"287988a0ff675d53","name":"test_role_success1_20260123_034933","source":"287988a0ff675d53.png","type":"image/png","size":106074},{"uid":"8ac961e07220adc8","name":"test_role_success1_20260123_034933","source":"8ac961e07220adc8.png","type":"image/png","size":19002},{"uid":"633bcf8e759d9809","name":"test_role_success1_20260123_034933","source":"633bcf8e759d9809.png","type":"image/png","size":19002},{"uid":"fa8824e6a46707b2","name":"test_role_success1_20260123_034933","source":"fa8824e6a46707b2.png","type":"image/png","size":19002},{"uid":"b3e5c43f376e9507","name":"test_role_success1_20260123_034933","source":"b3e5c43f376e9507.png","type":"image/png","size":19002},{"uid":"95f3d05c3aa5c03","name":"test_role_success1_20260123_034933","source":"95f3d05c3aa5c03.png","type":"image/png","size":148586},{"uid":"51323756f4e3257c","name":"log","source":"51323756f4e3257c.txt","type":"text/plain","size":9723}],"parameters":[],"stepsCount":0,"hasContent":true,"attachmentStep":false,"attachmentsCount":8,"shouldDisplayMessage":true},"afterStages":[{"name":"login_to_role::0","time":{"start":1769111938675,"stop":1769111940843,"duration":2168},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false}],"labels":[{"name":"story","value":"添加角色成功，勾选所有菜单,并且增加该用户权限，可切换新建单元"},{"name":"feature","value":"角色管理页用例"},{"name":"parentSuite","value":"Tests.test_system"},{"name":"suite","value":"test_role"},{"name":"subSuite","value":"TestRolePage"},{"name":"host","value":"WIN-20240820MJV"},{"name":"thread","value":"43156-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Tests.test_system.test_role"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"7a85e7a399bb5862.json","parameterValues":[]}